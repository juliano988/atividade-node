<!doctype html>
<html lang="pt_BR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Atividade Node - JÃºlio Faria</title>
  </head>
  <body>

    <form method="POST">

      <label for="nome">Nome: </label>
      <input id="nome" name="nome" type="text" required/><br/>

      <label for="data">Data de nascimento: </label>
      <input id="data" name="data" type="date" required/><br/>

      <label for="idade">Idade: </label>
      <input id="idade" name="idade" type="number" min="0" required readonly/><br/>

      <label for="cpf">CPF: </label>
      <input id="cpf" name="cpf" type="text" pattern="[0-9]{3}\.[0-9]{3}\.[0-9]{3}-[0-9]{2}" required/><br/>

      <button type="submit">Enviar</button>

    </form>

  </body>

  <script>

    window.addEventListener('load',function(){

      document.getElementById('data').max = new Date().toISOString().slice(0,10);

    });

    document.getElementById('data').addEventListener('change',function(e){

      const inputDateTimeStamp = new Date(e.target.value).valueOf();
      const inputAge = new Date(new Date().valueOf() - inputDateTimeStamp).getFullYear() - 1970;

      document.getElementById('idade').value = inputAge;

    });

  </script>

</html>